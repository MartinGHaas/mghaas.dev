---
import Header from "@/components/Header.astro";
import Layout from "../layouts/Layout.astro";
import { Button } from "@/components/ui/button";
import GithubIcon from "../../lib/icons/GithubIcon.astro";
---

<Layout title="mghaas.dev">
  <Header />
  <main class="min-h-[80vh] px-0 sm:px-4">
    <div id="ascii-wrap" class="w-full overflow-hidden flex justify-center">
      <pre
        id="ascii-logo"
        class="font-mono text-sm font-bold ascii-wave mt-24">
                              █████                                         █████                     
                         ░░███                                         ░░███                      
 █████████████    ███████ ░███████    ██████    ██████    █████      ███████   ██████  █████ █████
░░███░░███░░███  ███░░███ ░███░░███  ░░░░░███  ░░░░░███  ███░░      ███░░███  ███░░███░░███ ░░███ 
 ░███ ░███ ░███ ░███ ░███ ░███ ░███   ███████   ███████ ░░█████    ░███ ░███ ░███████  ░███  ░███ 
 ░███ ░███ ░███ ░███ ░███ ░███ ░███  ███░░███  ███░░███  ░░░░███   ░███ ░███ ░███░░░   ░░███ ███  
 █████░███ █████░░███████ ████ █████░░████████░░████████ ██████  ██░░████████░░██████   ░░█████   
░░░░░ ░░░ ░░░░░  ░░░░░███░░░░ ░░░░░  ░░░░░░░░  ░░░░░░░░ ░░░░░░  ░░  ░░░░░░░░  ░░░░░░     ░░░░░    
                 ███ ░███                                                                         
                ░░██████                                                                          
                 ░░░░░░                                                                           
      </pre>
    </div>
    <div class="flex w-full justify-center">
      <a href="https://github.com/MartinGHaas/mghaas.dev" target="_blank">
        <Button className="mr-5">
          <GithubIcon class="mr-2" />
          View on Github
        </Button>
      </a>
    </div>
  </main>
</Layout>

<style>
  @keyframes asciiGreenWave {
    0% {
      /* start on the left, vertically centered */
      background-position: 100%;
    }
    100% {
      /* move to the right */
      background-position: 0%;
    }
  }

  .ascii-wave {
    /* Use theme foreground as base; green band sweeps left → right */
    --wave-base: var(--foreground);
    --wave-accent: #34ff25;

    color: transparent; /* ensure background-clip shows through in all engines */
    -webkit-text-fill-color: transparent;
    background-image: linear-gradient(
      135deg,
      var(--wave-base) 0%,
      var(--wave-base) 45%,
      var(--wave-accent) 48%,
      var(--wave-accent) 52%,
      var(--wave-base) 55%,
      var(--wave-base) 100%
    );
    background-clip: text;
    -webkit-background-clip: text;
    background-size: 300% 100%;
    animation: asciiGreenWave 4.5s linear infinite;
  }
  @media (prefers-reduced-motion: reduce) {
    .ascii-wave {
      animation: none;
      background-position: 50% 50%;
    }
  }

  /* Ensure the ASCII pre can be scaled to fit on mobile */
  #ascii-logo {
    display: inline-block;
    transform-origin: top center;
    will-change: transform;
    white-space: pre;
  }
</style>

<script is:inline>
  // Scale the ASCII art to fit within its container width on small screens.
  const fitAscii = () => {
    const pre = document.getElementById('ascii-logo');
    const wrap = document.getElementById('ascii-wrap');
    if (!pre || !wrap) return;
    // Reset any previous scaling to measure the natural width
    pre.style.transform = 'none';
    const available = wrap.clientWidth;
    const natural = pre.scrollWidth;
    const scale = natural > 0 ? Math.min(1, available / natural) : 1;
    pre.style.transform = `scale(${scale})`;
  };

  // Initial fit and keep in sync on resize
  window.addEventListener('load', fitAscii);
  window.addEventListener('resize', fitAscii);
  new ResizeObserver(fitAscii).observe(document.documentElement);
  fitAscii();
</script>
